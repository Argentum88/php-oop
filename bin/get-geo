#!/usr/bin/env php

<?php

use Argentum88\OOP\IpToGeo\IpApiCom;
use Argentum88\OOP\SuperGeo;

require_once __DIR__ . '/../vendor/autoload.php';

$ip = $argc > 1 ? $argv[1] : '';

$geoService = new IpApiCom();
$superGeo = new SuperGeo($geoService);

try {
    $info = $superGeo->getInfo($ip);
    echo "{$info->getCountry()} - {$info->getCity()}\n";
} catch (Throwable $e) {
    echo "Произошла ошибка!\n";
}
